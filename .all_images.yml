dockerfile: |-
  RUN apk add --no-cache build-base yaml-dev openssl-dev git
  RUN gem update --system
  RUN gem install bundler gem_hadar

script: &script |-
  echo -e "\e[1m"
  ruby -v
  echo -e "\e[0m"
  bundle install --jobs=$(getconf _NPROCESSORS_ONLN)
  rake spec

before: |-
  echo ğŸ Preparingâ€¦
  echo Deleting Gemfile.lock
  rm -f Gemfile.lock

after: |-
  if [[ "$RESULT" = "1" ]]
  then
    echo ğŸ˜µ Some tests failed!
  else
    echo ğŸ¥³ All tests passed!
  fi

fail_fast: true

images:
  ruby:4.0-alpine: *script
  ruby:3.4-alpine: *script
  ruby:3.3-alpine: *script
  ruby:3.2-alpine: *script
  ruby:3.1-alpine: *script
